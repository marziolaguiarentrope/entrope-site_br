<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Entrope - Automação e Times Dedicados para sua Operação</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a; /* slate-900 */
            color: #cbd5e1; /* slate-300 */
        }
        /* Using Brand Blue from Media Kit */
        .brand-blue { color: #3b82f6; } /* blue-500 for better contrast on dark */
        .bg-brand-blue { background-color: #2563EB; }

        .hero-gradient {
            background: radial-gradient(circle at 50% 0%, rgba(37, 99, 235, 0.15), transparent 70%);
        }
        .cta-button {
            transition: all 0.3s ease;
        }
        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.2), 0 4px 6px -2px rgba(59, 130, 246, 0.1);
        }
        .loader {
            border: 4px solid #334155; /* slate-700 */
            border-top: 4px solid #3b82f6; /* blue-500 */
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .json-preview {
            background-color: #020617; /* slate-950 */
            color: #e2e8f0; /* slate-200 */
            border: 1px solid #1e293b; /* slate-800 */
            border-radius: 0.5rem;
            padding: 1rem;
            font-family: monospace;
            white-space: pre-wrap;
            text-align: left;
        }
        .whatsapp-icon-gradient {
            background: linear-gradient(135deg, #25D366, #128C7E);
        }
        
        /* --- Modern Fade-in Animation --- */
        .fade-in-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- Dark Mode Specifics --- */
        .dark-card {
            background-color: #1e293b; /* slate-800 */
            border: 1px solid #334155; /* slate-700 */
        }
        .dark-card-highlight {
            border-color: #3b82f6;
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.2);
        }
        .dark-input {
            background-color: #1e293b;
            border-color: #475569; /* slate-600 */
            color: #f1f5f9; /* slate-100 */
        }
        .dark-input:focus {
            border-color: #3b82f6;
            --tw-ring-color: #3b82f6;
        }
        details[open] {
            background-color: #1e293b;
        }
        details summary svg {
             transition: transform 0.2s ease-in-out;
        }
        details[open] summary svg {
            transform: rotate(180deg);
        }
    </style>
</head>
<body class="text-slate-300">

    <!-- Header -->
    <header class="bg-slate-900/80 backdrop-blur-lg fixed top-0 left-0 right-0 z-50 border-b border-slate-700/75">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
           <a href="#" class="flex items-center">
               <img src="logo-empresa (1).png" alt="Logo Entrope" class="h-10 w-auto">
           </a>
            <nav class="hidden md:flex items-center space-x-8">
                <a href="#engagement-models" class="text-slate-300 hover:text-blue-500 transition">Como Atuamos</a>
                <a href="#use-cases" class="text-slate-300 hover:text-blue-500 transition">Soluções</a>
                <a href="#faq" class="text-slate-300 hover:text-blue-500 transition">Dúvidas Frequentes</a>
            </nav>
            <a href="#contact" class="bg-brand-blue text-white font-semibold px-5 py-2.5 rounded-lg cta-button hidden md:inline-block">Fale com um Especialista</a>
            <button id="mobile-menu-button" class="md:hidden p-2 rounded-md text-slate-300 hover:bg-slate-700">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
            </button>
        </div>
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 border-t border-slate-700 bg-slate-900">
             <a href="#engagement-models" class="block py-2 text-slate-300 hover:text-blue-500">Como Atuamos</a>
             <a href="#use-cases" class="block py-2 text-slate-300 hover:text-blue-500">Soluções</a>
             <a href="#faq" class="block py-2 text-slate-300 hover:text-blue-500">Dúvidas Frequentes</a>
             <a href="#contact" class="mt-4 block w-full text-center bg-brand-blue text-white font-semibold px-5 py-2.5 rounded-lg cta-button">Fale com um Especialista</a>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section class="pt-32 pb-20 md:pt-48 md:pb-28 relative overflow-hidden">
            <div class="hero-gradient absolute inset-0"></div>
            <div class="container mx-auto px-6 text-center relative z-10 fade-in-section">
                <h1 class="text-4xl md:text-6xl font-extrabold text-slate-50 leading-tight mb-4">
                    Ampliamos sua equipe com <span class="brand-blue">especialistas em automação.</span>
                </h1>
                <p class="max-w-3xl mx-auto text-lg md:text-xl text-slate-300 mb-8">
                    Conectamos suas ferramentas e otimizamos processos com automações robustas no WhatsApp, atuando como uma extensão do seu time. Reduza o trabalho manual e ganhe eficiência, seja em projetos pontuais ou em parcerias de longo prazo.
                </p>
                <a href="#contact" class="bg-brand-blue text-white font-bold px-8 py-4 rounded-lg text-lg cta-button inline-block">
                    Agende uma conversa
                </a>
            </div>
        </section>

        <!-- Engagement Models Section -->
        <section id="engagement-models" class="py-20 bg-slate-800/50">
            <div class="container mx-auto px-6 fade-in-section">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">Como podemos atuar na sua empresa</h2>
                    <p class="text-lg text-slate-400 mt-2 max-w-2xl mx-auto">Seja para resolver um gargalo específico ou para ter um parceiro contínuo de automação, temos o modelo de trabalho ideal para sua operação.</p>
                </div>
                <div class="grid md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                    <div class="dark-card p-8 rounded-2xl flex flex-col">
                        <h3 class="text-2xl font-bold text-white mb-3">Projetos com Escopo Fechado</h3>
                        <p class="text-slate-400 mb-6 flex-grow">Tem um processo manual que precisa ser automatizado? Nós desenhamos, desenvolvemos e implementamos a solução completa, com prazo e custo definidos.</p>
                        <ul class="space-y-3 text-slate-300 mb-8">
                            <li class="flex items-center"><svg class="w-5 h-5 text-emerald-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Escopo e preço definidos</li>
                            <li class="flex items-center"><svg class="w-5 h-5 text-emerald-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Entrega com prazo determinado</li>
                            <li class="flex items-center"><svg class="w-5 h-5 text-emerald-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Perfeito para automações específicas</li>
                        </ul>
                        <a href="#contact" class="mt-auto w-full text-center bg-slate-700 text-white font-semibold py-3 rounded-lg hover:bg-slate-600 transition-colors">Solicite uma proposta</a>
                    </div>
                    <div class="dark-card dark-card-highlight p-8 rounded-2xl flex flex-col">
                        <h3 class="text-2xl font-bold text-white mb-3">Time Dedicado (Squad as a Service)</h3>
                        <p class="text-slate-400 mb-6 flex-grow">Alocamos um ou mais especialistas para atuar como parte do seu time, focados em identificar oportunidades e implementar um roadmap contínuo de automação.</p>
                        <ul class="space-y-3 text-slate-300 mb-8">
                            <li class="flex items-center"><svg class="w-5 h-5 text-emerald-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Parceria de longo prazo</li>
                            <li class="flex items-center"><svg class="w-5 h-5 text-emerald-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Flexibilidade para múltiplos projetos</li>
                            <li class="flex items-center"><svg class="w-5 h-5 text-emerald-400 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>Ideal para escalar a operação</li>
                        </ul>
                         <a href="#contact" class="mt-auto w-full text-center bg-brand-blue text-white font-semibold py-3 rounded-lg cta-button">Converse sobre parceria</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Use Cases Section -->
        <section id="use-cases" class="py-20">
            <div class="container mx-auto px-6 fade-in-section">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">O que podemos automatizar para você</h2>
                    <p class="text-lg text-slate-400 mt-2 max-w-2xl mx-auto">Da qualificação de um lead à notificação de entrega, criamos fluxos de trabalho que conectam suas ferramentas e eliminam tarefas repetitivas.</p>
                </div>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="dark-card p-8 rounded-2xl">
                        <h3 class="text-xl font-semibold text-white mb-2">Jornada de Leads e Vendas</h3>
                        <p class="text-slate-400 mb-4">Capture, qualifique e distribua leads que chegam pelo WhatsApp diretamente para o seu CRM, notificando o time de vendas no Slack. Exemplo: WhatsApp → HubSpot → Slack.</p>
                        <span class="text-sm font-semibold text-blue-400">Integrações Populares: HubSpot, Salesforce, Slack</span>
                    </div>
                    <div class="dark-card p-8 rounded-2xl">
                        <h3 class="text-xl font-semibold text-white mb-2">Atendimento e Suporte ao Cliente</h3>
                        <p class="text-slate-400 mb-4">Responda dúvidas frequentes 24/7, abra tickets no seu sistema de help desk e transborde para um atendente humano apenas quando for necessário.</p>
                         <span class="text-sm font-semibold text-blue-400">Integrações Populares: Zendesk, Intercom, Gmail</span>
                    </div>
                    <div class="dark-card p-8 rounded-2xl">
                        <h3 class="text-xl font-semibold text-white mb-2">Operações e Logística</h3>
                        <p class="text-slate-400 mb-4">Envie atualizações automáticas sobre status de pedidos, colete informações para trocas e devoluções, e mantenha o cliente informado sem esforço manual.</p>
                         <span class="text-sm font-semibold text-blue-400">Integrações Populares: Shopify, WooCommerce, Google Sheets</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Testimonials Section -->
        <section id="testimonials" class="py-20 bg-slate-800/50">
            <div class="container mx-auto px-6 fade-in-section">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">A experiência de quem já trabalha conosco</h2>
                </div>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="dark-card p-8 rounded-2xl">
                        <p class="text-slate-300 text-lg mb-6">"Ter a Entrope como nosso time dedicado de automação foi um divisor de águas. Ganhamos uma capacidade de inovação que seria impossível de construir internamente no mesmo ritmo. Eles são parte da nossa equipe."</p>
                        <div class="flex items-center">
                            <img src="https://placehold.co/48x48/1e293b/94a3b8?text=JS" alt="John Smith" class="w-12 h-12 rounded-full mr-4">
                            <div>
                                <p class="font-semibold text-white">João Silva</p>
                                <p class="text-slate-400">Diretor de Vendas, InnovateCorp</p>
                            </div>
                        </div>
                    </div>
                    <div class="dark-card p-8 rounded-2xl">
                        <p class="text-slate-300 text-lg mb-6">"O processo para automatizar nossa integração de parceiros era complexo e demorado. A Entrope desenhou e entregou a solução em poucas semanas. O ROI foi claro desde o primeiro mês."</p>
                        <div class="flex items-center">
                            <img src="https://placehold.co/48x48/1e293b/94a3b8?text=AD" alt="Alisha D." class="w-12 h-12 rounded-full mr-4">
                            <div>
                                <p class="font-semibold text-white">Ana D'Souza</p>
                                <p class="text-slate-400">Gerente de Operações, QuantumLeap</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- AI Idea Generator Section -->
        <section id="ai-generator" class="py-20">
            <div class="container mx-auto px-6 fade-in-section">
                <div class="dark-card rounded-2xl p-8 md:p-16 text-center">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">Não sabe por onde começar? Vamos desenhar um rascunho.</h2>
                    <p class="text-lg text-slate-400 mt-3 mb-8 max-w-2xl mx-auto">Descreva um processo manual da sua empresa. Nossa ferramenta de IA vai gerar uma estrutura básica de automação para dar o pontapé inicial na nossa conversa.</p>
                    
                    <form id="idea-generator-form" class="max-w-xl mx-auto">
                        <div class="flex flex-col sm:flex-row gap-4">
                            <input id="business-description" type="text" placeholder="ex: 'qualificar novos leads do meu site'" class="w-full p-4 rounded-lg dark-input focus:outline-none focus:ring-2" required>
                            <button type="submit" class="bg-brand-blue text-white font-bold px-6 py-4 rounded-lg cta-button flex-shrink-0">✨ Gerar estrutura básica</button>
                        </div>
                    </form>

                    <div id="loader" class="hidden mx-auto mt-8"></div>
                    <div id="error-message" class="hidden mt-6 text-lg text-red-400 font-semibold"></div>
                    
                    <div id="idea-results-container" class="hidden mt-12 text-center">
                        <pre id="json-result" class="json-preview"></pre>
                        <div class="bg-blue-900/40 border-l-4 border-blue-500 text-blue-200 p-6 rounded-r-lg mt-8 max-w-3xl mx-auto text-left">
                            <h3 class="font-bold text-xl text-white mb-2">Este é o ponto de partida.</h3>
                            <p class="text-lg">Um fluxo de trabalho real vai muito além. Ele inclui tratamento de erros, lógicas condicionais e integrações profundas com seus sistemas. Vamos conversar para desenhar a solução completa?</p>
                        </div>
                         <a href="#contact" class="bg-emerald-500 text-white font-bold px-8 py-4 rounded-lg text-lg cta-button inline-block mt-8">Agendar um bate-papo técnico &rarr;</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section id="faq" class="py-20 bg-slate-800/50">
            <div class="container mx-auto px-6 fade-in-section">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">Dúvidas comuns sobre nosso trabalho</h2>
                </div>
                <div class="max-w-3xl mx-auto space-y-4">
                    <details class="dark-card p-6 rounded-xl cursor-pointer transition-colors">
                        <summary class="font-semibold text-lg text-white list-none flex justify-between items-center">
                            Quando devo escolher um Projeto Pontual vs. um Time Dedicado?
                            <svg class="w-5 h-5 text-slate-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" /></svg>
                        </summary>
                        <p class="text-slate-400 mt-4">O **Projeto Pontual** é perfeito para resolver um problema específico com escopo fechado. O **Time Dedicado** funciona como um 'squad as a service', ideal para empresas que têm um roadmap de automação e precisam de um parceiro contínuo para evoluir seus processos.</p>
                    </details>
                    <details class="dark-card p-6 rounded-xl cursor-pointer transition-colors">
                        <summary class="font-semibold text-lg text-white list-none flex justify-between items-center">
                            Por que vocês usam n8n?
                             <svg class="w-5 h-5 text-slate-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" /></svg>
                        </summary>
                        <p class="text-slate-400 mt-4">n8n é uma plataforma de automação de código aberto que nos dá flexibilidade total para construir fluxos de trabalho complexos, conectar com qualquer API e garantir que a solução seja escalável e segura, rodando na sua própria infraestrutura se necessário.</p>
                    </details>
                    <details class="dark-card p-6 rounded-xl cursor-pointer transition-colors">
                        <summary class="font-semibold text-lg text-white list-none flex justify-between items-center">
                            Como os projetos são precificados?
                             <svg class="w-5 h-5 text-slate-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" /></svg>
                        </summary>
                        <p class="text-slate-400 mt-4">Para **Projetos Pontuais**, o preço é fixo, baseado no escopo. Para o **Time Dedicado**, o valor é um 'retainer' mensal, de acordo com a alocação de horas. Todas as propostas são detalhadas e sem surpresas.</p>
                    </details>
                </div>
            </div>
        </section>

        <!-- CTA / Detailed Contact Section -->
        <section id="contact" class="py-20">
            <div class="container mx-auto px-6 fade-in-section">
                <div class="dark-card rounded-2xl shadow-xl p-8 md:p-16 text-center">
                    <h2 class="text-3xl md:text-4xl font-bold text-white">Vamos desenhar a automação ideal para sua operação?</h2>
                    <p class="text-lg text-slate-400 mt-3 mb-8 max-w-2xl mx-auto">Preencha o formulário com o máximo de detalhes possível. Um de nossos especialistas analisará seu cenário e entrará em contato para agendar uma conversa técnica, sem compromisso.</p>
                    
                    <form id="contact-form" class="max-w-xl mx-auto text-left">
                        <div class="grid sm:grid-cols-2 gap-6 mb-6">
                            <div>
                                <label for="name" class="font-semibold text-slate-200 block mb-2">Seu Nome</label>
                                <input id="name" type="text" placeholder="ex: Maria da Silva" class="w-full p-3 rounded-lg dark-input focus:outline-none focus:ring-2" required>
                            </div>
                            <div>
                                <label for="email" class="font-semibold text-slate-200 block mb-2">E-mail de Trabalho</label>
                                <input id="email" type="email" placeholder="maria.silva@empresa.com" class="w-full p-3 rounded-lg dark-input focus:outline-none focus:ring-2" required>
                            </div>
                        </div>
                         <div class="mb-6">
                            <label for="interest-type" class="font-semibold text-slate-200 block mb-2">Tenho interesse em...</label>
                            <select id="interest-type" class="w-full p-3 rounded-lg dark-input focus:outline-none focus:ring-2" required>
                                <option value="">Selecione o modelo...</option>
                                <option value="dedicated-team">Equipe Dedicada (Parceria Contínua)</option>
                                <option value="specific-project">Projeto Pontual</option>
                                <option value="not-sure">Ainda não tenho certeza</option>
                            </select>
                        </div>
                        <div class="mb-6">
                             <label for="description" class="font-semibold text-slate-200 block mb-2">Descreva seu desafio ou objetivo</label>
                            <textarea id="description" placeholder="Nos conte um pouco sobre o que você precisa automatizar. Quanto mais detalhes, melhor para nossa conversa inicial." rows="6" class="w-full p-3 rounded-lg dark-input focus:outline-none focus:ring-2" required></textarea>
                        </div>
                        <button type="submit" class="w-full bg-brand-blue text-white font-bold px-8 py-4 rounded-lg text-lg cta-button">Enviar para análise</button>
                    </form>
                    <div id="form-success-message" class="hidden mt-6 text-lg text-emerald-400 font-semibold">
                        Recebemos suas informações. Em breve, um de nossos especialistas entrará em contato para agendar a conversa. Obrigado!
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 border-t border-slate-700 text-slate-400 py-12">
        <div class="container mx-auto px-6 text-center">
            <a href="#" class="flex items-center justify-center mb-4">
                <img src="logo-empresa (1).png" alt="Logo Entrope" class="h-10 w-auto">
            </a>

            <p class="text-sm mt-1 mb-4">Automação como serviço para escalar sua operação.</p>
            <p class="text-xs text-slate-500">Especialistas em n8n e automação de processos.</p>
            <p class="text-xs text-slate-500 mt-2">&copy; 2025 Entrope. Todos os direitos reservados.</p>
        </div>
    </footer>

    <script>
        // --- Standard Website Interactivity ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                if (!mobileMenu.classList.contains('hidden')) {
                    mobileMenu.classList.add('hidden');
                }
                const targetElement = document.querySelector(this.getAttribute('href'));
                if(targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });

        const contactForm = document.getElementById('contact-form');
        const successMessage = document.getElementById('form-success-message');
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            contactForm.style.display = 'none';
            successMessage.classList.remove('hidden');
        });
        
        // --- FAQ Accordion ---
        document.querySelectorAll('details').forEach((detail) => {
            detail.addEventListener('toggle', (event) => {
                // No need for JS to rotate arrow, handled by CSS details[open]
            });
        });

        // --- Fade-in Animation on Scroll ---
        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                }
            });
        }, {
            threshold: 0.1 // Trigger when 10% of the element is visible
        });

        const sectionsToFade = document.querySelectorAll('.fade-in-section');
        sectionsToFade.forEach((section) => {
            observer.observe(section);
        });

        // --- Gemini API Idea Generator ---
        const ideaForm = document.getElementById('idea-generator-form');
        const businessDescriptionInput = document.getElementById('business-description');
        const loader = document.getElementById('loader');
        const resultsContainer = document.getElementById('idea-results-container');
        const jsonResultEl = document.getElementById('json-result');
        const errorMessage = document.getElementById('error-message');

        ideaForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            const description = businessDescriptionInput.value;
            if (!description.trim()) return;

            resultsContainer.classList.add('hidden');
            errorMessage.classList.add('hidden');
            loader.classList.remove('hidden');
            loader.scrollIntoView({ behavior: 'smooth', block: 'center' });

            try {
                const prompt = `Based on the user's request to automate "${description}", generate a simple, conceptual n8n workflow in JSON format. The JSON should have a "trigger" and an array of "steps". Each step should have a "node" (e.g., "WhatsApp", "AI Model", "Google Sheets") and an "action" (a simple description of what it does). Keep it to 3-5 steps. This is a basic preview to spark interest.`;
                
                let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                const payload = {
                    contents: chatHistory,
                    generationConfig: { responseMimeType: "application/json" }
                };

                const apiKey = ""; // Handled by environment
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`API request failed with status ${response.status}`);
                }
                
                const result = await response.json();
                
                if (result.candidates && result.candidates[0]?.content?.parts?.[0]) {
                    const jsonText = result.candidates[0].content.parts[0].text;
                    displayJsonPreview(jsonText);
                } else {
                    throw new Error("The AI returned an unexpected response format.");
                }

            } catch (error) {
                console.error("Error generating ideas:", error);
                errorMessage.textContent = `Desculpe, não conseguimos gerar uma prévia no momento. Por favor, tente uma descrição diferente ou entre em contato conosco diretamente.`;
                errorMessage.classList.remove('hidden');
            } finally {
                loader.classList.add('hidden');
            }
        });

        function displayJsonPreview(jsonString) {
            try {
                const parsedJson = JSON.parse(jsonString);
                jsonResultEl.textContent = JSON.stringify(parsedJson, null, 2);
                resultsContainer.classList.remove('hidden');
                resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            } catch (e) {
                jsonResultEl.textContent = jsonString;
                console.error("Failed to parse JSON from AI, displaying raw text.", e);
                resultsContainer.classList.remove('hidden');
                resultsContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }
        }
    </script>
</body>
</html>
